{
  "title": "Tiled-Base Rendering && Virtual List",
  "date": "2022-11-11T02:30:00.000Z",
  "body": {
    "raw": " \n# 长列表渲染\n\n>> JS操作远比DOM操作块，大量JS操作导致的DOM更新会引起页面卡顿、奔溃\n\n## 分片渲染\n\n分片渲染采用定时器，在一段时间内只渲染每一分片大小的列表数据\n\n<CustomSandpack template='react-ts' files={{\n  'App.tsx': `import {useState, useEffect} from 'react'\n    import {useMemoizedFn} from 'ahooks'\n\n    export default function App(): JSX.Element {\n      const size = 20;\n      const [startIndex, setStartIndex] = useState<number>(0)\n      const [data, setData] = useState<string[]>([])\n      const [renderList, setRenderList] = useState<string[]>([])\n\n      useEffect(() => {\n        setData(Array.from(Array(10000), (_, i) => 'I am data: ' + i))\n      }, [])\n\n      const TiledBaseRendering = useMemoizedFn(function (){\n        const tmpList = data.slice(startIndex, startIndex+size)\n        if(tmpList && tmpList.length){\n          setTimeout(() => {\n            setRenderList(s => [...s, ...tmpList])\n            setStartIndex(s => s+size)\n            TiledBaseRendering()\n          }, 100)\n        }\n      })\n      return <div>\n        <div><button onClick={TiledBaseRendering}>render</button></div>\n        {renderList.map(item => <div>{item}</div>)}\n      </div>\n    }\n  `,\n  }} \n  customSetup={{\n    dependencies: {\n      \"ahooks\": \"^3.7.2\",\n    },\n  }} \n/>\n",
    "code": "var Component=(()=>{var u=Object.create;var o=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty;var h=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),g=(t,e)=>{for(var n in e)o(t,n,{get:e[n],enumerable:!0})},d=(t,e,n,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of p(e))!x.call(t,r)&&r!==n&&o(t,r,{get:()=>e[r],enumerable:!(i=l(e,r))||i.enumerable});return t};var b=(t,e,n)=>(n=t!=null?u(f(t)):{},d(e||!t||!t.__esModule?o(n,\"default\",{value:t,enumerable:!0}):n,t)),_=t=>d(o({},\"__esModule\",{value:!0}),t);var c=h((M,a)=>{a.exports=_jsx_runtime});var w={};g(w,{default:()=>L,frontmatter:()=>k});var s=b(c()),k={title:\"Tiled-Base Rendering && Virtual List\",date:new Date(16681626e5)};function m(t){let e=Object.assign({h1:\"h1\",blockquote:\"blockquote\",p:\"p\",h2:\"h2\"},t.components),{CustomSandpack:n}=e;return n||j(\"CustomSandpack\",!0,\"13:1-49:3\"),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h1,{id:\"\\u957F\\u5217\\u8868\\u6E32\\u67D3\",children:\"\\u957F\\u5217\\u8868\\u6E32\\u67D3\"}),`\n`,(0,s.jsxs)(e.blockquote,{children:[`\n`,(0,s.jsxs)(e.blockquote,{children:[`\n`,(0,s.jsx)(e.p,{children:\"JS\\u64CD\\u4F5C\\u8FDC\\u6BD4DOM\\u64CD\\u4F5C\\u5757\\uFF0C\\u5927\\u91CFJS\\u64CD\\u4F5C\\u5BFC\\u81F4\\u7684DOM\\u66F4\\u65B0\\u4F1A\\u5F15\\u8D77\\u9875\\u9762\\u5361\\u987F\\u3001\\u5954\\u6E83\"}),`\n`]}),`\n`]}),`\n`,(0,s.jsx)(e.h2,{id:\"\\u5206\\u7247\\u6E32\\u67D3\",children:\"\\u5206\\u7247\\u6E32\\u67D3\"}),`\n`,(0,s.jsx)(e.p,{children:\"\\u5206\\u7247\\u6E32\\u67D3\\u91C7\\u7528\\u5B9A\\u65F6\\u5668\\uFF0C\\u5728\\u4E00\\u6BB5\\u65F6\\u95F4\\u5185\\u53EA\\u6E32\\u67D3\\u6BCF\\u4E00\\u5206\\u7247\\u5927\\u5C0F\\u7684\\u5217\\u8868\\u6570\\u636E\"}),`\n`,(0,s.jsx)(n,{template:\"react-ts\",files:{\"App.tsx\":`import {useState, useEffect} from 'react'\n    import {useMemoizedFn} from 'ahooks'\n\n    export default function App(): JSX.Element {\n      const size = 20;\n      const [startIndex, setStartIndex] = useState<number>(0)\n      const [data, setData] = useState<string[]>([])\n      const [renderList, setRenderList] = useState<string[]>([])\n\n      useEffect(() => {\n        setData(Array.from(Array(10000), (_, i) => 'I am data: ' + i))\n      }, [])\n\n      const TiledBaseRendering = useMemoizedFn(function (){\n        const tmpList = data.slice(startIndex, startIndex+size)\n        if(tmpList && tmpList.length){\n          setTimeout(() => {\n            setRenderList(s => [...s, ...tmpList])\n            setStartIndex(s => s+size)\n            TiledBaseRendering()\n          }, 100)\n        }\n      })\n      return <div>\n        <div><button onClick={TiledBaseRendering}>render</button></div>\n        {renderList.map(item => <div>{item}</div>)}\n      </div>\n    }\n  `},customSetup:{dependencies:{ahooks:\"^3.7.2\"}}})]})}function S(t={}){let{wrapper:e}=t.components||{};return e?(0,s.jsx)(e,Object.assign({},t,{children:(0,s.jsx)(m,t)})):m(t)}var L=S;function j(t,e,n){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+t+\"` to be defined: you likely forgot to import, pass, or provide it.\"+(n?\"\\nIt\\u2019s referenced in your code at `\"+n+\"` in `/Users/machengcong/Downloads/Code/web-knowledge-ground/src/framework/React/_mdx_bundler_entry_point-e771a9d5-872a-4ce5-8ae0-093b0d22d880.mdx`\":\"\"))}return _(w);})();\n;return Component;"
  },
  "_id": "React/tiled-base-render_virtual-list.mdx",
  "_raw": {
    "sourceFilePath": "React/tiled-base-render_virtual-list.mdx",
    "sourceFileName": "tiled-base-render_virtual-list.mdx",
    "sourceFileDir": "React",
    "contentType": "mdx",
    "flattenedPath": "React/tiled-base-render_virtual-list"
  },
  "type": "Framework",
  "url": "src/framework/React/tiled-base-render_virtual-list"
}