{
  "title": "跨域问题",
  "date": "2022-12-05T07:30:00.000Z",
  "body": {
    "raw": "\n# 跨域问题\n\n## 1.URL构成\n`Protocol://Domain(Host):Port/Filepath/Filename`\n\n## 2.跨域原因\n浏览器限制了跨域资源(不同协议、不用域名、不同端口)的资源交互\n\n## 2.解决跨越的方法\n- 前端代理(dev->nodejs， prod->Nginx)\n- 后端开启跨域资源共享\n\n### 前端代理\n- dev开发环境下运行项目都会起dev server，通过dev server将请求代理转发\n```nodejs\n  proxy: {\n    '/api': {\n      target: 'http://domainName.com',\n      pathRewrite: { '^/api': '' }, \n      changeOrigin: true,\n    },\n  }\n```\n参数解析：\n1. `/api`: 一个标识，告诉dev server(node)哪些请求需要代理  \n不然的话 html css js这些静态资源请求都跑去代理。  \n接口以`/api`开头的才使用代理，所以代码里请求接口都需要写成 `/api/xx/xx `   \n2.`pathRewrite`: 路径重写  \n最终代理完的路径是 `http://domainName.com/api/xx/xx`    \n但后端实际接口路径是：`http://domainName.com/xx/xx`  \npathRewrite的值` ^/api: ''`，表明把路径中的 `/api` 替换成`''`\n",
    "code": "var Component=(()=>{var s=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var b=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),g=(r,e)=>{for(var i in e)c(r,i,{get:e[i],enumerable:!0})},l=(r,e,i,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let d of x(e))!u.call(r,d)&&d!==i&&c(r,d,{get:()=>e[d],enumerable:!(t=p(e,d))||t.enumerable});return r};var j=(r,e,i)=>(i=r!=null?s(m(r)):{},l(e||!r||!r.__esModule?c(i,\"default\",{value:r,enumerable:!0}):i,r)),v=r=>l(c({},\"__esModule\",{value:!0}),r);var h=b((F,o)=>{o.exports=_jsx_runtime});var N={};g(N,{default:()=>w,frontmatter:()=>_});var n=j(h()),_={title:\"\\u8DE8\\u57DF\\u95EE\\u9898\",date:new Date(16702542e5)};function a(r){let e=Object.assign({h1:\"h1\",h2:\"h2\",p:\"p\",code:\"code\",ul:\"ul\",li:\"li\",h3:\"h3\",pre:\"pre\",ol:\"ol\",br:\"br\"},r.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h1,{id:\"\\u8DE8\\u57DF\\u95EE\\u9898\",children:\"\\u8DE8\\u57DF\\u95EE\\u9898\"}),`\n`,(0,n.jsx)(e.h2,{id:\"1url\\u6784\\u6210\",children:\"1.URL\\u6784\\u6210\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.code,{children:\"Protocol://Domain(Host):Port/Filepath/Filename\"})}),`\n`,(0,n.jsx)(e.h2,{id:\"2\\u8DE8\\u57DF\\u539F\\u56E0\",children:\"2.\\u8DE8\\u57DF\\u539F\\u56E0\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6D4F\\u89C8\\u5668\\u9650\\u5236\\u4E86\\u8DE8\\u57DF\\u8D44\\u6E90(\\u4E0D\\u540C\\u534F\\u8BAE\\u3001\\u4E0D\\u7528\\u57DF\\u540D\\u3001\\u4E0D\\u540C\\u7AEF\\u53E3)\\u7684\\u8D44\\u6E90\\u4EA4\\u4E92\"}),`\n`,(0,n.jsx)(e.h2,{id:\"2\\u89E3\\u51B3\\u8DE8\\u8D8A\\u7684\\u65B9\\u6CD5\",children:\"2.\\u89E3\\u51B3\\u8DE8\\u8D8A\\u7684\\u65B9\\u6CD5\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u524D\\u7AEF\\u4EE3\\u7406(dev->nodejs\\uFF0C prod->Nginx)\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u540E\\u7AEF\\u5F00\\u542F\\u8DE8\\u57DF\\u8D44\\u6E90\\u5171\\u4EAB\"}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"\\u524D\\u7AEF\\u4EE3\\u7406\",children:\"\\u524D\\u7AEF\\u4EE3\\u7406\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"dev\\u5F00\\u53D1\\u73AF\\u5883\\u4E0B\\u8FD0\\u884C\\u9879\\u76EE\\u90FD\\u4F1A\\u8D77dev server\\uFF0C\\u901A\\u8FC7dev server\\u5C06\\u8BF7\\u6C42\\u4EE3\\u7406\\u8F6C\\u53D1\"}),`\n`]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-nodejs\",children:`  proxy: {\n    '/api': {\n      target: 'http://domainName.com',\n      pathRewrite: { '^/api': '' }, \n      changeOrigin: true,\n    },\n  }\n`})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u53C2\\u6570\\u89E3\\u6790\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"/api\"}),\": \\u4E00\\u4E2A\\u6807\\u8BC6\\uFF0C\\u544A\\u8BC9dev server(node)\\u54EA\\u4E9B\\u8BF7\\u6C42\\u9700\\u8981\\u4EE3\\u7406\",(0,n.jsx)(e.br,{}),`\n`,\"\\u4E0D\\u7136\\u7684\\u8BDD html css js\\u8FD9\\u4E9B\\u9759\\u6001\\u8D44\\u6E90\\u8BF7\\u6C42\\u90FD\\u8DD1\\u53BB\\u4EE3\\u7406\\u3002\",(0,n.jsx)(e.br,{}),`\n`,\"\\u63A5\\u53E3\\u4EE5\",(0,n.jsx)(e.code,{children:\"/api\"}),\"\\u5F00\\u5934\\u7684\\u624D\\u4F7F\\u7528\\u4EE3\\u7406\\uFF0C\\u6240\\u4EE5\\u4EE3\\u7801\\u91CC\\u8BF7\\u6C42\\u63A5\\u53E3\\u90FD\\u9700\\u8981\\u5199\\u6210 \",(0,n.jsx)(e.code,{children:\"/api/xx/xx \"}),(0,n.jsx)(e.br,{}),`\n`,\"2.\",(0,n.jsx)(e.code,{children:\"pathRewrite\"}),\": \\u8DEF\\u5F84\\u91CD\\u5199\",(0,n.jsx)(e.br,{}),`\n`,\"\\u6700\\u7EC8\\u4EE3\\u7406\\u5B8C\\u7684\\u8DEF\\u5F84\\u662F \",(0,n.jsx)(e.code,{children:\"http://domainName.com/api/xx/xx\"}),(0,n.jsx)(e.br,{}),`\n`,\"\\u4F46\\u540E\\u7AEF\\u5B9E\\u9645\\u63A5\\u53E3\\u8DEF\\u5F84\\u662F\\uFF1A\",(0,n.jsx)(e.code,{children:\"http://domainName.com/xx/xx\"}),(0,n.jsx)(e.br,{}),`\n`,\"pathRewrite\\u7684\\u503C\",(0,n.jsx)(e.code,{children:\" ^/api: ''\"}),\"\\uFF0C\\u8868\\u660E\\u628A\\u8DEF\\u5F84\\u4E2D\\u7684 \",(0,n.jsx)(e.code,{children:\"/api\"}),\" \\u66FF\\u6362\\u6210\",(0,n.jsx)(e.code,{children:\"''\"})]}),`\n`]})]})}function f(r={}){let{wrapper:e}=r.components||{};return e?(0,n.jsx)(e,Object.assign({},r,{children:(0,n.jsx)(a,r)})):a(r)}var w=f;return v(N);})();\n;return Component;"
  },
  "_id": "Others/1-跨域问题.mdx",
  "_raw": {
    "sourceFilePath": "Others/1-跨域问题.mdx",
    "sourceFileName": "1-跨域问题.mdx",
    "sourceFileDir": "Others",
    "contentType": "mdx",
    "flattenedPath": "Others/1-跨域问题"
  },
  "type": "Framework",
  "url": "src/framework/Others/1-跨域问题"
}